<?xml version="1.0" encoding="utf-8"?>
<!--
  file_exchange for OpenERP
  Copyright (C) 2012 Akretion Emmanuel Samyn <emmanuel.samyn@akretion.com>
  The licence is in the file __openerp__.py
-->

<openerp>
    <data>
    <!-- VIEW FOR THE OBJECT : file_exchange -->
        <record id="file_exchange_view_form" model="ir.ui.view">
            <field name="name">file_exchange.file_exchange.view_form</field>
            <field name="model">file.exchange</field>
            <field eval="16" name="priority"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="file_exchange">
                    <field name="name" />
                    <field name="referential_id" />
                    <field name="scheduler" />
                    <group name="file_types" colspan="2" col="4">
                        <field name="type" />
                        <field name="do_not_update" />
                    </group>
                    <field name="model_id" />
                    <group name="file_parameters" colspan="2" col="4">
                        <field name="encoding"/>
                        <field name="format" />
                    </group>
                    <field name="search_filter" attrs="{'invisible':[('type','!=','out')]}"/>
                    <group name="file_options" colspan="2" col="4">
                        <field name="lang" />
                        <field name="delimiter" />
                    </group>
                    <field name="folder_path" />
                    <field name="archive_folder_path"  attrs="{'invisible':[('type','!=','in')]}"/>
                    <field name="filename"/>
                    <group name="Start Task" colspan="2" col="2">
                        <button name="start_task" colspan="2" string="Import files" type="object" attrs="{'invisible':[('type','!=','in')]}"/>
                        <button name="start_task" colspan="2" string="Export files" type="object" attrs="{'invisible':[('type','!=','out')]}"/>
                    </group>
                    <notebook colspan="4">
                        <page string="Fields">
                            <field name="field_ids" colspan="4" nolabel="1"/>
                        </page>
                        <page string="Action Before/After All" >
                            <separator string="Action Before All" colspan="4"/>
                            <field name="action_before_all" colspan="4" nolabel="1"/>
                            <separator string="Action After All" colspan="4"/>
                            <field name="action_after_all" colspan="4" nolabel="1"/>
                        </page>
                        <page string="Action Before/After Each" >
                            <separator string="Action Before Each" colspan="4"/>
                            <field name="action_before_each" colspan="4" nolabel="1"/>
                            <separator string="Action After Each" colspan="4"/>
                            <field name="action_after_each" colspan="4" nolabel="1"/>
                        </page>
                        <page string="CSV file generation">
                            <button name="create_exchange_file" string="Export exchange file" colspan="2" type="object" />
                            <button name="create_file_fields" string="Export fields file" colspan="2" type="object" />
                        </page>
                        <page string="Import Default Values">
                            <field name="import_default_field" colspan="4" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="file_exchange_view_tree" model="ir.ui.view">
            <field name="name">file_exchange_view_tree</field>
            <field name="model">file.exchange</field>
            <field eval="16" name="priority"/>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="file_exchange">
                    <field name="referential_id" />
                    <field name="name" />
                    <field name="format" />
                    <field name="type" />
                    <field name="scheduler" />
                </tree>
            </field>
        </record>

    <!-- VIEW FOR THE OBJECT : file_fields -->
        <record id="file_fields_view_form" model="ir.ui.view">
            <field name="name">file_exchange.file_fields.view_form</field>
            <field name="model">file.fields</field>
            <field eval="16" name="priority"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="file_fields">
                    <field name="sequence" />
                    <field name="mapping_line_id" attrs="{'readonly':[('custom_name','!=',False)]}"/>
                    <field name="custom_name" attrs="{'readonly':[('mapping_line_id','!=',False)]}"/>
                    <field name="default_value" attrs="{'readonly':[('advanced_default_value','!=',False)]}"/>
                    <field name="is_compulsary"/>
                    <separator string="Advanced Default Value" colspan="4"/>
                    <field name='alternative_key'/>
                    <field name="advanced_default_value" nolabel="1" colspan="4"/>
                </form>
            </field>
        </record>

        <record id="file_fields_view_tree" model="ir.ui.view">
            <field name="name">file_fields_view_tree</field>
            <field name="model">file.fields</field>
            <field eval="16" name="priority"/>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree editable="top" string="file_fields">
                    <field name="sequence" />
                    <field name="is_compulsary"/>
                    <field name="mapping_line_id" attrs="{'readonly':[('custom_name','!=',False)]}"/>
                    <field name="custom_name" attrs="{'readonly':[('mapping_line_id','!=',False)]}"/>
                    <field name="name"/>
                    <field name="default_value"/>
                    <field name='alternative_key'/>
                </tree>
            </field>
        </record>

    <!-- VIEW FOR THE OBJECT : default_fields -->
        <record id="default_fields_view_form" model="ir.ui.view">
            <field name="name">file_exchange.default_fields.view_form</field>
            <field name="model">file.default.import.values</field>
            <field eval="16" name="priority"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="file default import values">
                    <field name="import_default_field" />
                    <field name="import_default_value" />
                    <field name="file_id" />
                    <field name="mapping_id" />
                    <field name="related_model" attrs="{'invisible':'1'}"/>
                </form>
            </field>
        </record>

        <record id="default_fields_view_tree" model="ir.ui.view">
            <field name="name">file_exchange.default_fields_view_tree</field>
            <field name="model">file.default.import.values</field>
            <field eval="16" name="priority"/>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree editable="top" string="file default import values">
                    <field name="import_default_field" />
                    <field name="import_default_value" />
                    <field name="file_id" />
                    <field name="mapping_id" />
                    <field name="related_model" attrs="{'invisible':'1'}" />
                </tree>
            </field>
        </record>

<!--WIZARD TO ADD SCHEDULER -->

        <record id="ir_action_create_scheduler_in_file_exchange" model="ir.values">
            <field name="key2">client_action_multi</field>
            <field name="model">file.exchange</field>
            <field name="name">Create a scheduler</field>
            <field eval="'ir.actions.act_window,%d'%ref('base_scheduler_creator.action_scheduler_creator_wizard')" name="value"/>
            <field eval="True" name="object"/>
        </record>

    </data>
</openerp>
